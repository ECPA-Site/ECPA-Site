<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Mega 3D Roblox Style</title>
<style>
body { margin:0; overflow:hidden; background:#000; }
#ui {
  position:fixed; bottom:20px; left:20px; z-index:10;
}
.btn {
  width:70px; height:70px;
  border-radius:50%;
  background:rgba(255,255,255,0.2);
  color:white;
  font-size:24px;
  border:2px solid white;
}
#jump { position:fixed; bottom:20px; right:20px; }
</style>
</head>
<body>

<div id="ui">
  <button class="btn" id="left">◀</button>
  <button class="btn" id="right">▶</button>
</div>
<button class="btn" id="jump">⬆</button>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
let scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

let camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

// Свет
let light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(5,10,5);
scene.add(light);
scene.add(new THREE.AmbientLight(0xffffff, 0.4));

// Земля
let ground = new THREE.Mesh(
  new THREE.BoxGeometry(100,1,100),
  new THREE.MeshStandardMaterial({color:0x228B22})
);
ground.position.y = -0.5;
scene.add(ground);

// Игрок
let player = new THREE.Mesh(
  new THREE.BoxGeometry(1,2,1),
  new THREE.MeshStandardMaterial({color:0xff0000})
);
player.position.y = 1;
scene.add(player);

// Физика
let velocityY = 0;
let onGround = true;

// Управление
let keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// Кнопки (мобилка)
left.onclick = ()=> keys["a"]=true;
right.onclick = ()=> keys["d"]=true;
left.onmouseleave = ()=> keys["a"]=false;
right.onmouseleave = ()=> keys["d"]=false;
jump.onclick = ()=> {
  if(onGround){ velocityY = 0.35; onGround=false; }
};

function update(){
  if(keys["a"]) player.position.x -= 0.1;
  if(keys["d"]) player.position.x += 0.1;
  if(keys["w"]) player.position.z -= 0.1;
  if(keys["s"]) player.position.z += 0.1;

  velocityY -= 0.02;
  player.position.y += velocityY;

  if(player.position.y <= 1){
    player.position.y = 1;
    velocityY = 0;
    onGround = true;
  }

  // Камера Roblox‑style
  camera.position.lerp(
    new THREE.Vector3(
      player.position.x,
      player.position.y + 4,
      player.position.z + 8
    ),
    0.1
  );
  camera.lookAt(player.position);
}

function animate(){
  requestAnimationFrame(animate);
  update();
  renderer.render(scene, camera);
}
animate();

window.onresize = ()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
};
</script>

</body>
</html>

